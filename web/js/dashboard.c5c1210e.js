(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"0ac0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("base-component",{ref:"Base",scopedSlots:e._u([{key:"query",fn:function(){return[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"日期"}},[n("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始","end-placeholder":"结束"},on:{change:e.reload},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"消费者"}},[n("el-select",{attrs:{filterable:"",clearable:"",remote:"","remote-method":e.remoteMethod,loading:e.loading,"popper-class":"autocomplete"},on:{change:e.reload},model:{value:e.queryInfo.personId,callback:function(t){e.$set(e.queryInfo,"personId",t)},expression:"queryInfo.personId"}},e._l(e.options,(function(t,a){return n("el-option",{key:a,attrs:{label:t.personName,value:t.id}},[n("div",{staticClass:"title"},[e._v(" "+e._s(t.personName)+" ")]),n("span",{staticClass:"sub"},[e._v(e._s(t.orgName))])])})),1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"消费类型"}},[n("el-select",{attrs:{clearable:""},on:{change:e.reload},model:{value:e.queryInfo.type,callback:function(t){e.$set(e.queryInfo,"type",t)},expression:"queryInfo.type"}},[n("el-option",{attrs:{label:"消费",value:-1}}),n("el-option",{attrs:{label:"充值",value:1}}),n("el-option",{attrs:{label:"全部",value:0}})],1)],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"部门"}},[n("el-cascader",{attrs:{clearable:"",props:{emitPath:!1,checkStrictly:!0,value:"id",label:"name"},options:e.orgTree},on:{change:e.reload},model:{value:e.queryInfo.orgIndexCode,callback:function(t){e.$set(e.queryInfo,"orgIndexCode",t)},expression:"queryInfo.orgIndexCode"}})],1)],1)]},proxy:!0},{key:"action",fn:function(){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.exportData}},[e._v("导出")])]},proxy:!0},{key:"table",fn:function(){return[n("el-table-column",{attrs:{prop:"orgName",label:"部门",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.orgName.replace("默认组织/","")))]}}])}),n("el-table-column",{attrs:{prop:"personName",label:"消费者"}}),n("el-table-column",{attrs:{prop:"dinningType",label:"餐别",width:"120"}}),n("el-table-column",{attrs:{prop:"deduction",label:"消费金额",width:"100"}}),n("el-table-column",{attrs:{prop:"typeName",label:"类型",width:"100"}}),n("el-table-column",{attrs:{prop:"balance",label:"余额",width:"100"}}),n("el-table-column",{attrs:{prop:"debitDate",label:"日期",width:"120"}})]},proxy:!0}])})},r=[];n("4de4"),n("c975"),n("d81d"),n("b0c0"),n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var l=n("5530"),i=(n("96cf"),n("1da1")),s=n("365c"),c=n("21a6"),u=n.n(c),d=(n("bc3a"),n("c1df")),f=n.n(d),p={name:"Attence",data:function(){return{queryInfo:{type:0},dateRange:[f()().subtract(1,"months").format("YYYY-MM-DD"),f()().format("YYYY-MM-DD")],orgTree:[],orgList:[],loading:!1,options:[]}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].organization.getTree();case 2:n=t.sent,e.orgTree=n.data[0].children,e.orgList=e.$flatmap(e.orgTree);case 5:case"end":return t.stop()}}),t)})))()},methods:{reload:function(){this.$refs.Base.reload()},_getPageData:function(e){return e.startTime=this.dateRange&&this.dateRange[0],e.endTime=this.dateRange&&this.dateRange[1],s["a"].finance.pagelist(e)},_reset:function(){this.queryInfo={},this.dateRange=[],this.reload()},exportData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].finance.export(Object(l["a"])(Object(l["a"])({},e.queryInfo),{},{pageNum:void 0,startTime:e.dateRange&&e.dateRange[0],endTime:e.dateRange&&e.dateRange[1]}));case 2:n=t.sent,u.a.saveAs(n,"account.xlsx");case 4:case"end":return t.stop()}}),t)})))()},remoteMethod:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=7;break}return t.loading=!0,n.next=4,s["a"].account.getUserListByKey(e);case 4:a=n.sent,t.options=t.handleUserList(a.data),t.loading=!1;case 7:case"end":return n.stop()}}),n)})))()},handleSelect:function(){},handleUserList:function(e){var t=this;return e.map((function(e){var n=e.orgName,a=t.orgList.filter((function(t){return t.id==e.orgIndexCode}));if(!(a.length>0))return{orgName:n,personName:e.personName,id:e.personId};var r=function(){var r={id:e.orgIndexCode,pid:a[0].pid};while(-1==r.pid.indexOf("root")){var o=t.orgList.filter((function(e){return e.id==r.pid}))[0];n=o.name+"/"+n,r=o}return{v:{orgName:n,personName:e.personName,id:e.personId}}}();return"object"===o(r)?r.v:void 0}))}}},m=p,g=(n("6779"),n("2877")),b=Object(g["a"])(m,a,r,!1,null,null,null);t["default"]=b.exports},"21a6":function(e,t,n){(function(n){var a,r,o;(function(n,l){r=[],a=l,o="function"===typeof a?a.apply(t,r):a,void 0===o||(e.exports=o)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function a(e,t,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){s(a.response,t,n)},a.onerror=function(){console.error("could not download file")},a.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,i=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,t,n){var i=l.URL||l.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?o(s):r(s.href)?a(e,t,n):o(s,s.target="_blank")):(s.href=i.createObjectURL(e),setTimeout((function(){i.revokeObjectURL(s.href)}),4e4),setTimeout((function(){o(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,l){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,l),n);else if(r(e))a(e,n,l);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){o(i)}))}}:function(e,t,n,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return a(e,t,n);var o="application/octet-stream"===e.type,s=/constructor/i.test(l.HTMLElement)||l.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&s||i)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},u.readAsDataURL(e)}else{var d=l.URL||l.webkitURL,f=d.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout((function(){d.revokeObjectURL(f)}),4e4)}});l.saveAs=s.saveAs=s,e.exports=s}))}).call(this,n("c8ba"))},"3ca3":function(e,t,n){"use strict";var a=n("6547").charAt,r=n("69f3"),o=n("7dd0"),l="String Iterator",i=r.set,s=r.getterFor(l);o(String,"String",(function(e){i(this,{type:l,string:String(e),index:0})}),(function(){var e,t=s(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=a(n,r),t.index+=e.length,{value:e,done:!1})}))},6779:function(e,t,n){"use strict";var a=n("b998"),r=n.n(a);r.a},b998:function(e,t,n){},c3d0:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("base-component",{ref:"Base",scopedSlots:e._u([{key:"query",fn:function(){return[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"日期"}},[n("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始","end-placeholder":"结束"},on:{change:e.reload},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"部门"}},[n("el-cascader",{attrs:{clearable:"",props:{emitPath:!1,checkStrictly:!0,value:"id",label:"name"},options:e.orgTree},on:{change:e.reload},model:{value:e.queryInfo.orgIndexCode,callback:function(t){e.$set(e.queryInfo,"orgIndexCode",t)},expression:"queryInfo.orgIndexCode"}})],1)],1)]},proxy:!0},{key:"table",fn:function(){return[n("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),n("el-table-column",{attrs:{prop:"personName",label:"姓名",width:"100"}}),n("el-table-column",{attrs:{prop:"orgName",label:"部门"}}),n("el-table-column",{attrs:{prop:"onStart",label:"上班时间"}},[[e._v("8:30")]],2),n("el-table-column",{attrs:{prop:"start",label:"第一次进门时间"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(e._f("datetime")(n.start,"HH:mm:ss")))]}}])}),n("el-table-column",{attrs:{prop:"onEnd",label:"下班时间"}},[[e._v("17:30")]],2),n("el-table-column",{attrs:{prop:"end",label:"最后一次出门时间"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(e._f("datetime")(n.end,"HH:mm:ss")))]}}])})]},proxy:!0}])})},r=[],o=(n("96cf"),n("1da1")),l=n("365c"),i=n("c1df"),s=n.n(i),c={name:"Attence",data:function(){return{queryInfo:{},dateRange:[s()().subtract(1,"months").format("YYYY-MM-DD"),s()().format("YYYY-MM-DD")],orgTree:[]}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].organization.getTree();case 2:n=t.sent,e.orgTree=n.data[0].children;case 4:case"end":return t.stop()}}),t)})))()},methods:{reload:function(){this.$refs.Base.reload()},_getPageData:function(e){return e.startTime=this.dateRange&&this.dateRange[0],e.endTime=this.dateRange&&this.dateRange[1],l["a"].attence.pagelist(e)},_reset:function(){this.queryInfo={},this.dateRange=[],this.reload()}}},u=c,d=n("2877"),f=Object(d["a"])(u,a,r,!1,null,null,null);t["default"]=f.exports},c6f9:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[e._v("user")])},r=[],o=(n("96cf"),n("1da1")),l={name:"UserMange",methods:{getData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("satrt"),t.next=3,e.$wait(1e3);case 3:console.log("end");case 4:case"end":return t.stop()}}),t)})))()}}},i=l,s=n("2877"),c=Object(s["a"])(i,a,r,!1,null,null,null);t["default"]=c.exports},d28b:function(e,t,n){var a=n("746f");a("iterator")},e01a:function(e,t,n){"use strict";var a=n("23e7"),r=n("83ab"),o=n("da84"),l=n("5135"),i=n("861d"),s=n("9bf2").f,c=n("e893"),u=o.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};c(f,u);var p=f.prototype=u.prototype;p.constructor=f;var m=p.toString,g="Symbol(test)"==String(u("test")),b=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=m.call(e);if(l(d,e))return"";var n=g?t.slice(7,-1):t.replace(b,"$1");return""===n?void 0:n}}),a({global:!0,forced:!0},{Symbol:f})}},e8a5:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[e._v("welcome")])},r=[],o={name:"Home"},l=o,i=n("2877"),s=Object(i["a"])(l,a,r,!1,null,null,null);t["default"]=s.exports}}]);